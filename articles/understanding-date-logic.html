<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Understanding Date Logic in vecshift • vecshift</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Understanding Date Logic in vecshift">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vecshift</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/understanding-date-logic.html">Understanding Date Logic</a></li>
    <li><a class="dropdown-item" href="../articles/status-classification.html">Employment Status Classification</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gmontaletti/vecshift/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Understanding Date Logic in vecshift</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gmontaletti/vecshift/blob/main/vignettes/understanding-date-logic.Rmd" class="external-link"><code>vignettes/understanding-date-logic.Rmd</code></a></small>
      <div class="d-none name"><code>understanding-date-logic.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gmontaletti.github.io/vecshift/">vecshift</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The vecshift package processes employment records with temporal data,
transforming them into continuous time segments with employment status
classifications. At the heart of this transformation lies precise
<strong>date logic</strong> that ensures accurate calculation of
employment and unemployment periods.</p>
<p>This vignette explains the updated date handling rules in the new
version of vecshift, which has <strong>deprecated the FINE+1
logic</strong> in favor of a simpler, more intuitive approach.</p>
</div>
<div class="section level2">
<h2 id="core-date-logic-principles">Core Date Logic Principles<a class="anchor" aria-label="anchor" href="#core-date-logic-principles"></a>
</h2>
<div class="section level3">
<h3 id="inclusive-contract-periods">1. Inclusive Contract Periods<a class="anchor" aria-label="anchor" href="#inclusive-contract-periods"></a>
</h3>
<p>Employment contracts in vecshift are treated as <strong>inclusive
date ranges</strong>:</p>
<ul>
<li>
<strong>Contract duration</strong>: From INIZIO to FINE (both days
included)</li>
<li>
<strong>Person works</strong>: ON both the start date and end
date</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example: January contract</span></span>
<span><span class="va">contract_start</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-01"</span><span class="op">)</span></span>
<span><span class="va">contract_end</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-31"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate duration</span></span>
<span><span class="va">duration</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">contract_end</span> <span class="op">-</span> <span class="va">contract_start</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Contract duration:"</span>, <span class="va">duration</span>, <span class="st">"days\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Contract duration: 31 days</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Person works from:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">contract_start</span>, <span class="st">"%B %d"</span><span class="op">)</span>, </span>
<span>    <span class="st">"to"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">contract_end</span>, <span class="st">"%B %d"</span><span class="op">)</span>, <span class="st">"(both days inclusive)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Person works from: January 01 to January 31 (both days inclusive)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-date-logic">2. The Date Logic<a class="anchor" aria-label="anchor" href="#the-date-logic"></a>
</h3>
<p><strong>Approach</strong>: The vecshift implementation creates end
events at FINE and adjusts unemployment periods afterward.</p>
<p>The logic: - End events are created at the contract end date (FINE) -
Unemployment segments (arco=0) are identified after event processing -
Unemployment dates are adjusted: inizio+1 and fine-1 - This maintains
temporal accuracy with simpler logic</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example: Contract ends January 31st</span></span>
<span><span class="va">contract_end</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-31"</span><span class="op">)</span></span>
<span><span class="co"># The end event is at FINE</span></span>
<span><span class="va">event_date</span> <span class="op">&lt;-</span> <span class="va">contract_end</span></span>
<span><span class="co"># Unemployment adjustment happens during processing</span></span>
<span><span class="va">unemployment_start</span> <span class="op">&lt;-</span> <span class="va">contract_end</span> <span class="op">+</span> <span class="fl">1</span>  <span class="co"># Still starts Feb 1 after adjustment</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Last day of work:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">contract_end</span>, <span class="st">"%B %d, %Y"</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Last day of work: January 31, 2023</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"End event created at:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">event_date</span>, <span class="st">"%B %d, %Y"</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; End event created at: January 31, 2023</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"First day unemployed (after adjustment):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">unemployment_start</span>, <span class="st">"%B %d, %Y"</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; First day unemployed (after adjustment): February 01, 2023</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="event-based-transformation">3. Event-Based Transformation<a class="anchor" aria-label="anchor" href="#event-based-transformation"></a>
</h3>
<p>vecshift converts each employment contract into exactly two
events:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Start Event</strong>: Date = INIZIO, Value = +1</li>
<li>
<strong>End Event</strong>: Date = FINE (not FINE+1 in new version),
Value = -1</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create sample employment data</span></span>
<span><span class="va">employment_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  cf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PERSON001"</span>, <span class="st">"PERSON001"</span><span class="op">)</span>,</span>
<span>  inizio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>, <span class="st">"2023-04-01"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  fine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-03-31"</span>, <span class="st">"2023-06-30"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Original employment data:"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Original employment data:"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">employment_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;       id        cf     inizio       fine prior</span></span>
<span><span class="co">#&gt;    &lt;int&gt;    &lt;char&gt;     &lt;Date&gt;     &lt;Date&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:     1 PERSON001 2023-01-01 2023-03-31     1</span></span>
<span><span class="co">#&gt; 2:     2 PERSON001 2023-04-01 2023-06-30     0</span></span>
<span></span>
<span><span class="co"># The new vecshift creates events at FINE (not FINE+1)</span></span>
<span><span class="co"># End events now occur ON the contract end date</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nIn the new logic:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; In the new logic:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"- End events are created at FINE\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; - End events are created at FINE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"- Unemployment periods are adjusted afterward (inizio+1, fine-1)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; - Unemployment periods are adjusted afterward (inizio+1, fine-1)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="practical-examples">Practical Examples<a class="anchor" aria-label="anchor" href="#practical-examples"></a>
</h2>
<div class="section level3">
<h3 id="scenario-1-consecutive-contracts-no-gap">Scenario 1: Consecutive Contracts (No Gap)<a class="anchor" aria-label="anchor" href="#scenario-1-consecutive-contracts-no-gap"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">consecutive_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  cf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"PERSON001"</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  inizio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>, <span class="st">"2023-04-01"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  fine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-03-31"</span>, <span class="st">"2023-06-30"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Consecutive contracts:"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Consecutive contracts:"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">consecutive_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;       id        cf     inizio       fine prior</span></span>
<span><span class="co">#&gt;    &lt;int&gt;    &lt;char&gt;     &lt;Date&gt;     &lt;Date&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:     1 PERSON001 2023-01-01 2023-03-31     1</span></span>
<span><span class="co">#&gt; 2:     2 PERSON001 2023-04-01 2023-06-30     0</span></span>
<span></span>
<span><span class="co"># Check if there's unemployment between contracts</span></span>
<span><span class="va">first_end</span> <span class="op">&lt;-</span> <span class="va">consecutive_data</span><span class="op">$</span><span class="va">fine</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">second_start</span> <span class="op">&lt;-</span> <span class="va">consecutive_data</span><span class="op">$</span><span class="va">inizio</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">gap_duration</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">second_start</span> <span class="op">-</span> <span class="va">first_end</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nFirst contract ends:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">first_end</span>, <span class="st">"%B %d"</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First contract ends: March 31</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Second contract starts:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">second_start</span>, <span class="st">"%B %d"</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Second contract starts: April 01</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Unemployment duration:"</span>, <span class="va">gap_duration</span>, <span class="st">"days\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Unemployment duration: 0 days</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">gap_duration</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"No unemployment gap - contracts are consecutive!\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; No unemployment gap - contracts are consecutive!</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="scenario-2-gap-between-contracts">Scenario 2: Gap Between Contracts<a class="anchor" aria-label="anchor" href="#scenario-2-gap-between-contracts"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  cf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"PERSON001"</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  inizio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>, <span class="st">"2023-03-15"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  fine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-02-28"</span>, <span class="st">"2023-05-31"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Contracts with gap:"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Contracts with gap:"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">gap_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;       id        cf     inizio       fine prior</span></span>
<span><span class="co">#&gt;    &lt;int&gt;    &lt;char&gt;     &lt;Date&gt;     &lt;Date&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:     1 PERSON001 2023-01-01 2023-02-28     1</span></span>
<span><span class="co">#&gt; 2:     2 PERSON001 2023-03-15 2023-05-31     0</span></span>
<span></span>
<span><span class="co"># Calculate unemployment period</span></span>
<span><span class="va">first_end</span> <span class="op">&lt;-</span> <span class="va">gap_data</span><span class="op">$</span><span class="va">fine</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">second_start</span> <span class="op">&lt;-</span> <span class="va">gap_data</span><span class="op">$</span><span class="va">inizio</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">gap_duration</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">second_start</span> <span class="op">-</span> <span class="va">first_end</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">unemployment_start</span> <span class="op">&lt;-</span> <span class="va">first_end</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="va">unemployment_end</span> <span class="op">&lt;-</span> <span class="va">second_start</span> <span class="op">-</span> <span class="fl">1</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nFirst contract ends:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">first_end</span>, <span class="st">"%B %d"</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First contract ends: February 28</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Unemployment period:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">unemployment_start</span>, <span class="st">"%B %d"</span><span class="op">)</span>, <span class="st">"to"</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">unemployment_end</span>, <span class="st">"%B %d"</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Unemployment period: March 01 to March 14</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Second contract starts:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">second_start</span>, <span class="st">"%B %d"</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Second contract starts: March 15</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Total unemployment days:"</span>, <span class="va">gap_duration</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Total unemployment days: 14</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="scenario-3-overlapping-contracts">Scenario 3: Overlapping Contracts<a class="anchor" aria-label="anchor" href="#scenario-3-overlapping-contracts"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">overlap_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  cf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"PERSON001"</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  inizio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>, <span class="st">"2023-03-01"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  fine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-06-30"</span>, <span class="st">"2023-04-30"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Overlapping contracts:"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Overlapping contracts:"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">overlap_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;       id        cf     inizio       fine prior</span></span>
<span><span class="co">#&gt;    &lt;int&gt;    &lt;char&gt;     &lt;Date&gt;     &lt;Date&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:     1 PERSON001 2023-01-01 2023-06-30     1</span></span>
<span><span class="co">#&gt; 2:     2 PERSON001 2023-03-01 2023-04-30     0</span></span>
<span></span>
<span><span class="co"># The vecshift function would generate events at these dates</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nEvents would be created at:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Events would be created at:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"- Contract 1 start:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">overlap_data</span><span class="op">$</span><span class="va">inizio</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="st">"(+1)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; - Contract 1 start: 2023-01-01 (+1)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"- Contract 1 end:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">overlap_data</span><span class="op">$</span><span class="va">fine</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="st">"(-1)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; - Contract 1 end: 2023-06-30 (-1)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"- Contract 2 start:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">overlap_data</span><span class="op">$</span><span class="va">inizio</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>, <span class="st">"(+1)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; - Contract 2 start: 2023-03-01 (+1)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"- Contract 2 end:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">overlap_data</span><span class="op">$</span><span class="va">fine</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>, <span class="st">"(-1)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; - Contract 2 end: 2023-04-30 (-1)</span></span>
<span></span>
<span><span class="co"># The cumulative sum would show overlapping employment</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nCumulative employment levels (arco):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Cumulative employment levels (arco):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"- Before March 1: arco = 1 (single employment)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; - Before March 1: arco = 1 (single employment)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"- March 1 - April 30: arco = 2 (overlapping employment)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; - March 1 - April 30: arco = 2 (overlapping employment)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"- May 1 - June 30: arco = 1 (single employment)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; - May 1 - June 30: arco = 1 (single employment)</span></span>
<span></span>
<span><span class="co"># Identify overlap period</span></span>
<span><span class="va">overlap_start</span> <span class="op">&lt;-</span> <span class="va">overlap_data</span><span class="op">$</span><span class="va">inizio</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">overlap_end</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">overlap_data</span><span class="op">$</span><span class="va">fine</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nOverlapping period:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">overlap_start</span>, <span class="st">"%B %d"</span><span class="op">)</span>, <span class="st">"to"</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">overlap_end</span>, <span class="st">"%B %d"</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Overlapping period: March 01 to April 30</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"During this period: arco = 2 (multiple employment)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; During this period: arco = 2 (multiple employment)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="duration-calculations">Duration Calculations<a class="anchor" aria-label="anchor" href="#duration-calculations"></a>
</h2>
<div class="section level3">
<h3 id="employment-vs-unemployment-duration">Employment vs Unemployment Duration<a class="anchor" aria-label="anchor" href="#employment-vs-unemployment-duration"></a>
</h3>
<p>Duration calculations differ based on employment status due to the
event structure:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create data with both employment and unemployment periods</span></span>
<span><span class="va">mixed_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  cf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"PERSON001"</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  inizio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>, <span class="st">"2023-04-01"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  fine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-02-28"</span>, <span class="st">"2023-06-30"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate employment durations (inclusive)</span></span>
<span><span class="va">emp_duration_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">mixed_data</span><span class="op">$</span><span class="va">fine</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="va">mixed_data</span><span class="op">$</span><span class="va">inizio</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">emp_duration_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">mixed_data</span><span class="op">$</span><span class="va">fine</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">mixed_data</span><span class="op">$</span><span class="va">inizio</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate unemployment duration</span></span>
<span><span class="va">unemp_duration</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">mixed_data</span><span class="op">$</span><span class="va">inizio</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">mixed_data</span><span class="op">$</span><span class="va">fine</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Employment periods:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Employment periods:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Contract 1:"</span>, <span class="va">emp_duration_1</span>, <span class="st">"days (Jan 1 - Feb 28, inclusive)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Contract 1: 59 days (Jan 1 - Feb 28, inclusive)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Contract 2:"</span>, <span class="va">emp_duration_2</span>, <span class="st">"days (Apr 1 - Jun 30, inclusive)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Contract 2: 91 days (Apr 1 - Jun 30, inclusive)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nUnemployment period:"</span>, <span class="va">unemp_duration</span>, <span class="st">"days (Mar 1 - Mar 31)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Unemployment period: 31 days (Mar 1 - Mar 31)</span></span>
<span></span>
<span><span class="co"># Verify total coverage</span></span>
<span><span class="va">total_days</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">mixed_data</span><span class="op">$</span><span class="va">fine</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">mixed_data</span><span class="op">$</span><span class="va">inizio</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">accounted_days</span> <span class="op">&lt;-</span> <span class="va">emp_duration_1</span> <span class="op">+</span> <span class="va">emp_duration_2</span> <span class="op">+</span> <span class="va">unemp_duration</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nTotal period:"</span>, <span class="va">total_days</span>, <span class="st">"days\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Total period: 181 days</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Accounted for:"</span>, <span class="va">accounted_days</span>, <span class="st">"days\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Accounted for: 181 days</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Complete coverage:"</span>, <span class="va">total_days</span> <span class="op">==</span> <span class="va">accounted_days</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Complete coverage: TRUE</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="data-quality-and-validation">Data Quality and Validation<a class="anchor" aria-label="anchor" href="#data-quality-and-validation"></a>
</h2>
<div class="section level3">
<h3 id="common-date-issues">Common Date Issues<a class="anchor" aria-label="anchor" href="#common-date-issues"></a>
</h3>
<p>The date logic module includes comprehensive validation to detect
common problems:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create data with various quality issues</span></span>
<span><span class="va">problem_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,</span>
<span>  cf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"PERSON001"</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  inizio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>, <span class="st">"2023-03-01"</span>, <span class="st">"2023-05-01"</span>, <span class="st">"2023-07-15"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  fine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-02-28"</span>, <span class="st">"2023-02-15"</span>, <span class="st">"2023-05-01"</span>, <span class="st">"2023-07-10"</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># Issues!</span></span>
<span>  prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Data with quality issues:"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Data with quality issues:"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">problem_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;       id        cf     inizio       fine prior</span></span>
<span><span class="co">#&gt;    &lt;int&gt;    &lt;char&gt;     &lt;Date&gt;     &lt;Date&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:     1 PERSON001 2023-01-01 2023-02-28     1</span></span>
<span><span class="co">#&gt; 2:     2 PERSON001 2023-03-01 2023-02-15     0</span></span>
<span><span class="co">#&gt; 3:     3 PERSON001 2023-05-01 2023-05-01     1</span></span>
<span><span class="co">#&gt; 4:     4 PERSON001 2023-07-15 2023-07-10     0</span></span>
<span></span>
<span><span class="co"># Basic validation can be done with simple R operations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nValidation Results:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Validation Results:</span></span>
<span><span class="va">invalid_ranges</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">problem_data</span><span class="op">$</span><span class="va">fine</span> <span class="op">&lt;</span> <span class="va">problem_data</span><span class="op">$</span><span class="va">inizio</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">zero_duration</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">problem_data</span><span class="op">$</span><span class="va">fine</span> <span class="op">==</span> <span class="va">problem_data</span><span class="op">$</span><span class="va">inizio</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Invalid date ranges:"</span>, <span class="va">invalid_ranges</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Invalid date ranges: 2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Zero duration contracts:"</span>, <span class="va">zero_duration</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Zero duration contracts: 1</span></span>
<span></span>
<span><span class="co"># Identify specific problems</span></span>
<span><span class="va">invalid_rows</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">problem_data</span><span class="op">$</span><span class="va">fine</span> <span class="op">&lt;</span> <span class="va">problem_data</span><span class="op">$</span><span class="va">inizio</span><span class="op">)</span></span>
<span><span class="va">zero_duration_rows</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">problem_data</span><span class="op">$</span><span class="va">fine</span> <span class="op">==</span> <span class="va">problem_data</span><span class="op">$</span><span class="va">inizio</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">invalid_rows</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nInvalid ranges (FINE &lt; INIZIO) in rows:"</span>, <span class="va">invalid_rows</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Invalid ranges (FINE &lt; INIZIO) in rows: 2 4</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">zero_duration_rows</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Zero duration contracts in rows:"</span>, <span class="va">zero_duration_rows</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Zero duration contracts in rows: 3</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-vecshift-for-analysis">Using vecshift for Analysis<a class="anchor" aria-label="anchor" href="#using-vecshift-for-analysis"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Analyze employment patterns using vecshift</span></span>
<span><span class="va">clean_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span>
<span>  cf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"PERSON001"</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  inizio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>, <span class="st">"2023-04-01"</span>, <span class="st">"2023-07-01"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  fine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-03-31"</span>, <span class="st">"2023-05-31"</span>, <span class="st">"2023-09-30"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use vecshift to create temporal segments</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/vecshift.html">vecshift</a></span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Temporal segments with employment status:"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Temporal segments with employment status:"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt;           cf     inizio       fine  arco prior    id over_id     durata</span></span>
<span><span class="co">#&gt;       &lt;char&gt;     &lt;Date&gt;     &lt;Date&gt; &lt;num&gt; &lt;num&gt; &lt;int&gt;   &lt;int&gt; &lt;difftime&gt;</span></span>
<span><span class="co">#&gt; 1: PERSON001 2023-01-01 2023-03-31     1     1     1       1    90 days</span></span>
<span><span class="co">#&gt; 2: PERSON001 2023-04-01 2023-05-31     1     0     2       2    61 days</span></span>
<span><span class="co">#&gt; 3: PERSON001 2023-06-01 2023-06-30     0     0     0       0    30 days</span></span>
<span><span class="co">#&gt; 4: PERSON001 2023-07-01 2023-09-30     1     1     3       3    92 days</span></span>
<span></span>
<span><span class="co"># Calculate employment statistics</span></span>
<span><span class="va">total_duration</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">durata</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">employment_duration</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">durata</span><span class="op">[</span><span class="va">result</span><span class="op">$</span><span class="va">arco</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">employment_rate</span> <span class="op">&lt;-</span> <span class="va">employment_duration</span> <span class="op">/</span> <span class="va">total_duration</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nEmployment statistics:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Employment statistics:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Employment rate:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">employment_rate</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Employment rate: 0.89</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Total segments:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Total segments: 4</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="integration-with-vecshift-processing">Integration with vecshift Processing<a class="anchor" aria-label="anchor" href="#integration-with-vecshift-processing"></a>
</h2>
<div class="section level3">
<h3 id="core-function-with-status-classification">Core Function with Status Classification<a class="anchor" aria-label="anchor" href="#core-function-with-status-classification"></a>
</h3>
<p>The main vecshift function now separates core temporal logic from
status classification:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example data</span></span>
<span><span class="va">employment_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span>
<span>  cf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"P001"</span>, <span class="st">"P001"</span>, <span class="st">"P002"</span><span class="op">)</span>,</span>
<span>  inizio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>, <span class="st">"2023-06-01"</span>, <span class="st">"2023-02-01"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  fine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-05-31"</span>, <span class="st">"2023-12-31"</span>, <span class="st">"2023-11-30"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Process with default status classification</span></span>
<span><span class="va">result_with_status</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/vecshift.html">vecshift</a></span><span class="op">(</span><span class="va">employment_data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_with_status</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;        cf     inizio       fine  arco prior    id over_id     durata</span></span>
<span><span class="co">#&gt;    &lt;char&gt;     &lt;Date&gt;     &lt;Date&gt; &lt;num&gt; &lt;num&gt; &lt;int&gt;   &lt;int&gt; &lt;difftime&gt;</span></span>
<span><span class="co">#&gt; 1:   P001 2023-01-01 2023-05-31     1     1     1       1   151 days</span></span>
<span><span class="co">#&gt; 2:   P001 2023-06-01 2023-12-31     1     0     2       2   214 days</span></span>
<span><span class="co">#&gt; 3:   P002 2023-02-01 2023-11-30     1     1     3       3   303 days</span></span>
<span><span class="co">#&gt; 4:   &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;    NA    NA    NA      NA    NA days</span></span>
<span><span class="co">#&gt; 5:   &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;    NA    NA    NA      NA    NA days</span></span>
<span></span>
<span><span class="co"># Process without status classification (raw segments only)</span></span>
<span><span class="va">result_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/vecshift.html">vecshift</a></span><span class="op">(</span><span class="va">employment_data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_raw</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;        cf     inizio       fine  arco prior    id over_id     durata</span></span>
<span><span class="co">#&gt;    &lt;char&gt;     &lt;Date&gt;     &lt;Date&gt; &lt;num&gt; &lt;num&gt; &lt;int&gt;   &lt;int&gt; &lt;difftime&gt;</span></span>
<span><span class="co">#&gt; 1:   P001 2023-01-01 2023-05-31     1     1     1       1   151 days</span></span>
<span><span class="co">#&gt; 2:   P001 2023-06-01 2023-12-31     1     0     2       2   214 days</span></span>
<span><span class="co">#&gt; 3:   P002 2023-02-01 2023-11-30     1     1     3       3   303 days</span></span>
<span><span class="co">#&gt; 4:   &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;    NA    NA    NA      NA    NA days</span></span>
<span><span class="co">#&gt; 5:   &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;    NA    NA    NA      NA    NA days</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="custom-status-classification">Custom Status Classification<a class="anchor" aria-label="anchor" href="#custom-status-classification"></a>
</h3>
<p>Status attribution is now handled by the dedicated
<code>classify_employment_status</code> function:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create custom classification rules</span></span>
<span><span class="va">custom_rules</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_custom_status_rules.html">create_custom_status_rules</a></span><span class="op">(</span></span>
<span>  unemployment_threshold <span class="op">=</span> <span class="fl">30</span>,  <span class="co"># Longer threshold</span></span>
<span>  custom_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    unemployed_short <span class="op">=</span> <span class="st">"job_seeking"</span>,</span>
<span>    unemployed_long <span class="op">=</span> <span class="st">"long_term_unemployed"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Apply custom classification</span></span>
<span><span class="va">result_custom</span> <span class="op">&lt;-</span> <span class="va">vecshift_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/vecshift.html">vecshift</a></span><span class="op">(</span><span class="va">employment_data</span><span class="op">)</span></span>
<span><span class="va">result_custom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classify_employment_status.html">classify_employment_status</a></span><span class="op">(</span><span class="va">vecshift_result</span>, rules <span class="op">=</span> <span class="va">custom_rules</span><span class="op">)</span></span></code></pre></div>
<p>This separation ensures: - Core date logic remains optimized and
unchanged - Status classification can be customized independently -
Clear separation of concerns for maintainability</p>
</div>
</div>
<div class="section level2">
<h2 id="best-practices">Best Practices<a class="anchor" aria-label="anchor" href="#best-practices"></a>
</h2>
<div class="section level3">
<h3 id="always-validate-input-data">1. Always Validate Input Data<a class="anchor" aria-label="anchor" href="#always-validate-input-data"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Before processing, always check data quality</span></span>
<span><span class="va">has_invalid_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">employment_data</span><span class="op">$</span><span class="va">FINE</span> <span class="op">&lt;</span> <span class="va">employment_data</span><span class="op">$</span><span class="va">INIZIO</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">has_invalid_dates</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span><span class="st">"Date issues detected - review data before processing"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="handle-different-date-formats">2. Handle Different Date Formats<a class="anchor" aria-label="anchor" href="#handle-different-date-formats"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># vecshift expects Date objects - convert if needed</span></span>
<span><span class="va">numeric_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19358</span>, <span class="fl">19387</span><span class="op">)</span>  <span class="co"># Days since 1970-01-01</span></span>
<span><span class="va">char_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>, <span class="st">"2023-01-30"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to Date objects</span></span>
<span><span class="va">dates_from_numeric</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">numeric_dates</span>, origin <span class="op">=</span> <span class="st">"1970-01-01"</span><span class="op">)</span></span>
<span><span class="va">dates_from_char</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">char_dates</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Date conversions:"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Date conversions:"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>from_numeric <span class="op">=</span> <span class="va">dates_from_numeric</span>, </span>
<span>           from_character <span class="op">=</span> <span class="va">dates_from_char</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $from_numeric</span></span>
<span><span class="co">#&gt; [1] "2023-01-01" "2023-01-30"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $from_character</span></span>
<span><span class="co">#&gt; [1] "2023-01-01" "2023-01-30"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="understand-the-business-context">3. Understand the Business Context<a class="anchor" aria-label="anchor" href="#understand-the-business-context"></a>
</h3>
<p>The vecshift date logic reflects real-world employment patterns:</p>
<ul>
<li>
<strong>Legal/Administrative</strong>: Employment contracts
typically end “end of day” on FINE</li>
<li>
<strong>Benefits</strong>: Unemployment benefits often start the day
after employment ends<br>
</li>
<li>
<strong>Taxation</strong>: Tax calculations need precise employment
period boundaries</li>
<li>
<strong>Analysis</strong>: Labor statistics require continuous
temporal coverage</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>The vecshift date logic ensures:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Temporal Continuity</strong>: Every day is classified as
either employed or unemployed</li>
<li>
<strong>Precision</strong>: FINE+1 logic eliminates ambiguity in
unemployment start dates<br>
</li>
<li>
<strong>Flexibility</strong>: Handles consecutive, overlapping, and
gap scenarios correctly</li>
<li>
<strong>Validation</strong>: Comprehensive quality checks prevent
common date errors</li>
<li>
<strong>Performance</strong>: Optimized for large-scale employment
datasets</li>
<li>
<strong>Modularity</strong>: Status classification is separate from
core temporal logic</li>
</ol>
<p>Key architectural principles: - <strong>Core Logic</strong>: The main
<code><a href="../reference/vecshift.html">vecshift()</a></code> function handles event-based temporal
transformation - <strong>Status Attribution</strong>: The
<code><a href="../reference/classify_employment_status.html">classify_employment_status()</a></code> function applies employment
labels - <strong>Customization</strong>: Status rules can be modified
without touching core date logic - <strong>Performance</strong>: Core
transformation remains optimized at ~1.46M records/second</p>
<p>Understanding this date logic is crucial for: - Correctly
interpreting vecshift results - Debugging unexpected outputs - Extending
the package functionality - Creating custom status classification rules
- Integrating with other temporal analysis tools</p>
<p>The vecshift architecture ensures consistent date logic while
allowing flexible customization of business rules and status
classifications through the integrated status labeling system.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gmontaletti" class="external-link">Giampaolo Montaletti</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
