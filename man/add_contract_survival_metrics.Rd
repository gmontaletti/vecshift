% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/survival_analysis.R
\name{add_contract_survival_metrics}
\alias{add_contract_survival_metrics}
\title{Add Contract Survival Metrics to Employment Data}
\usage{
add_contract_survival_metrics(
  data,
  contract_type_var = "COD_TIPOLOGIA_CONTRATTUALE",
  id_var = "cf",
  start_var = "INIZIO",
  end_var = "FINE",
  confidence_level = 0.95
)
}
\arguments{
\item{data}{A data.table from vecshift() containing employment segments}

\item{contract_type_var}{Character. Name of the contract type variable 
(default: "COD_TIPOLOGIA_CONTRATTUALE")}

\item{id_var}{Character. Person identifier variable (default: "cf")}

\item{start_var}{Character. Contract start date variable (default: "INIZIO")}

\item{end_var}{Character. Contract end date variable (default: "FINE")}

\item{confidence_level}{Numeric. Confidence level for survival estimates (default: 0.95)}
}
\value{
Enhanced data.table with additional columns:
  \itemize{
    \item{\code{survival_time}}: Duration or time to censoring
    \item{\code{censored}}: 1 if censored at max(FINE), 0 otherwise
    \item{\code{contract_type_median}}: Median survival time for contract type (accounting for censoring)
    \item{\code{median_ci_lower}}: Lower bound of 95% confidence interval for median survival
    \item{\code{median_ci_upper}}: Upper bound of 95% confidence interval for median survival
    \item{\code{survival_prob}}: Current survival probability at observed duration
  }
}
\description{
Enhances employment data with survival analysis metrics including survival time,
censoring indicators, median survival times, and confidence intervals for each contract type.
}
\examples{
\dontrun{
# Process employment data with vecshift
processed_data <- vecshift(employment_data)

# Add contract type information
processed_data[, COD_TIPOLOGIA_CONTRATTUALE := contract_codes]

# Add survival metrics
survival_data <- add_contract_survival_metrics(
  data = processed_data,
  contract_type_var = "COD_TIPOLOGIA_CONTRATTUALE"
)
}
}
